<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PhD Answers</title>
<style>
body {
  margin:0;
  height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  font-family:sans-serif;
  background:linear-gradient(135deg,#4e73df,#1cc88a);
  color:white;
  text-align:center;
  overflow:hidden;
}
#content {
  z-index:2;
}
button {
  padding:12px 20px;
  font-size:16px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  margin:5px;
}
canvas {
  position:fixed;
  top:0;
  left:0;
  pointer-events:none;
  z-index:1;
}
</style>
</head>
<body>

<div id="content">
  <h1>PhD Feedback</h1>
  <p id="questionText">Loading question...</p>
  <p id="answerText"></p>
  <div id="controls" style="display:none;">
    <button onclick="repeatAudio()">üîÅ Repeat Answer</button>
    <button onclick="nextAnswer()">‚è≠ Next Answer</button>
    <button onclick="nextQuestion()">‚û° Next Question</button>
  </div>
</div>

<audio id="player" playsinline></audio>
<canvas id="confetti"></canvas>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<script>
// Data structure: 5 questions, each with 10 answers
const questions = [
  {
    text: "What did you think of his PhD defense?",
    answers: [
      { audio: "robbie_q1.ogg", text: "Robbie" },
    ]
  },
  {
    text: "How did you find his research topic?",
    answers: [
      { audio: "robbie_q2.ogg", text: "Robbie" },

    ]
  },
  // Add questions 3,4,5 similarly...
];

// DOM elements
const player = document.getElementById("player");
const questionText = document.getElementById("questionText");
const answerText = document.getElementById("answerText");
const controls = document.getElementById("controls");

// Track indices
let currentQuestionIndex = Math.floor(Math.random() * questions.length);
let currentPersonIndex = 0;

// Confetti
function launchConfetti() {
  const duration = 2*1000;
  const end = Date.now() + duration;
  (function frame() {
    confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 } });
    confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 } });
    if (Date.now() < end) requestAnimationFrame(frame);
  }());
}

// Play current answer
function playCurrent() {
  const currentAnswer = questions[currentQuestionIndex].answers[currentPersonIndex];
  player.src = currentAnswer.audio;
  questionText.textContent = questions[currentQuestionIndex].text;
  answerText.textContent = currentAnswer.text;
  controls.style.display = "block";
  player.play().then(launchConfetti).catch(() => {
    questionText.innerHTML = "<button onclick='playCurrent()'>Tap to Play</button>";
  });
}

// Repeat current answer
function repeatAudio() {
  player.currentTime = 0;
  player.play();
  launchConfetti();
}

// Next answer
function nextAnswer() {
  currentPersonIndex = (currentPersonIndex + 1) % questions[currentQuestionIndex].answers.length;
  playCurrent();
}

// Next question
function nextQuestion() {
  let nextQuestionIndex;
  do {
    nextQuestionIndex = Math.floor(Math.random() * questions.length);
  } while (nextQuestionIndex === currentQuestionIndex);
  currentQuestionIndex = nextQuestionIndex;
  currentPersonIndex = 0;
  playCurrent();
}

// Initial load
playCurrent();
</script>

</body>
</html>

